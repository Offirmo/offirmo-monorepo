<!DOCTYPE html>

<script type="module">
	import nearest_pkg from '~/package.json'
	const ROOT_NAME = nearest_pkg?.name ?? 'unknown pkg'
	const LIB = `${ROOT_NAME}â€™s storypadâ€™s index.html`
	console.log(`[${LIB}] ðŸš€ Helloâ€¦`)

	// build the index of stories https://storybook.js.org/docs/api/main-config/main-config-indexers
	// important to load async so that the stories don't pollute the global scope too early (ex. before SXC)
	// that's enabled with .@(...) actually
	const storiesâµ§own = import('../../l0-types/l1-csf/**/*.stories.@(js|jsx|ts|tsx|mdx)')
	const storiesâµ§official = import('../../l3-compat/**/*.stories.@(js|jsx|ts|tsx|mdx)')
	const storiesâµ§stress_tests = {} //import('../../__tests/**/*.stories.@(js|jsx|ts|tsx|mdx)') break Storypad! Enable on-demand
	const stories_index = {
		own: storiesâµ§own,
		storybook_official: storiesâµ§official,
		stress: storiesâµ§stress_tests,
	}
	console.log(`[${LIB}] got the async glob(s):`, stories_index)


	console.log(`[${LIB}] now invoking storypadâ€¦`)
	import startê“½storypad from '@offirmo-private/storypad'
	startê“½storypad(
		stories_index,
		{
			root_title: ROOT_NAME,
			//decorators: []
		}
	)
</script>
