TODO read https://www.trevorlasn.com/blog/setimmediate-vs-settimeout-in-javascript
